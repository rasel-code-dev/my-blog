var K=Object.defineProperty,q=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var b=(a,t,e)=>t in a?K(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,m=(a,t)=>{for(var e in t||(t={}))C.call(t,e)&&b(a,e,t[e]);if(x)for(var e of x(t))O.call(t,e)&&b(a,e,t[e]);return a},N=(a,t)=>q(a,G(t));var P=(a,t)=>{var e={};for(var o in a)C.call(a,o)&&t.indexOf(o)<0&&(e[o]=a[o]);if(a!=null&&x)for(var o of x(a))t.indexOf(o)<0&&O.call(a,o)&&(e[o]=a[o]);return e};import{c as z,a as W,b as Z,t as J,s as w,d as Q,r as T,w as X,R as s,L as Y,m as ee,u as te,e as A,N as D,F as f,f as ae,g as se,h as oe,i as re,j as ne,k as le,l as ie,n as ce,S as ue,o as de,p as me,B as pe,P as fe}from"./vendor.16ba28b7.js";const he=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function e(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=e(r);fetch(r.href,n)}};he();const Ee={posts:[],postDetails:{},searchResultPosts:[],searchValue:"",likes:[]};function _e(a=Ee,t){let e=m({},a),o,r;switch(t.type){case"FETCH_POSTS":return e.posts=t.payload,e.searchResultPosts=t.payload,e;case"FETCH_POST":return e.postDetails=t.payload,e;case"DELETE_POST":let n=e.posts.filter(l=>l.id!==t.payload);return e.posts=n,e.searchResultPosts=n,e;case"FETCH_POST_MD_CONTENT":return e.postDetails.mdContent=t.payload,e;case"SEARCH_POSTS":return e.searchResultPosts=t.payload,e;case"SET_POST_SEARCH_VALUE":return e.searchValue=t.payload,e;case"FETCH_LIKES":return e.likes=t.payload,e;case"ADD_LIKE":return o=t.payload.post_id,r=e.posts.findIndex(l=>l.id===o),r!==-1&&(e.posts[r]=N(m({},e.posts[r]),{you_liked:1,total_likes:e.posts[r].total_likes+1})),e;case"REMOVE_LIKE":return o=t.payload.post_id,r=e.posts.findIndex(l=>l.id===o),r!==-1&&(e.posts[r]=N(m({},e.posts[r]),{you_liked:0,total_likes:e.posts[r].total_likes-1})),e;default:return a}}const ge={};function ye(a=ge,t){switch(t.type){case"A":return a;default:return a}}const ve={username:"",email:"",first_name:"",id:""};function Se(a=ve,t){switch(m({},a),t.type){case"LOGIN":let e=t.payload,{token:o}=e,r=P(e,["token"]);return o&&window.localStorage.setItem("token",o),r||{};default:return a}}const xe=z({postState:_e,appState:ye,authState:Se});var Pe=W(xe,{},Z(J));w.config({barColors:{"0":"#ff3d00","0.5":"#ff3d00","1.0":"#27ff00"},barThickness:2,shadowBlur:10,shadowColor:"#ff3d00"});const I="https://rsl-blog-server.herokuapp.com",_=Q.create({baseURL:I,headers:{token:window.localStorage.getItem("token")||""}});function Le(a){return I+"/"+a}const Ne="modulepreload",H={},we="/my-blog/",c=function(t,e){return!e||e.length===0?t():Promise.all(e.map(o=>{if(o=`${we}${o}`,o in H)return;H[o]=!0;const r=o.endsWith(".css"),n=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${n}`))return;const l=document.createElement("link");if(l.rel=r?"stylesheet":Ne,r||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),r)return new Promise((p,E)=>{l.addEventListener("load",p),l.addEventListener("error",E)})})).then(()=>t())},u=a=>{const t=T.exports.lazy(a);return t.preload=a,t},Te=u(()=>c(()=>import("./Posts.c7f6c26c.js"),["assets/Posts.c7f6c26c.js","assets/Posts.489262ef.css","assets/vendor.16ba28b7.js","assets/index.1b296300.js"])),Re=u(()=>c(()=>import("./Login.2ae4c31b.js"),["assets/Login.2ae4c31b.js","assets/vendor.16ba28b7.js"])),ke=u(()=>c(()=>import("./Registration.d5d9d925.js"),["assets/Registration.d5d9d925.js","assets/vendor.16ba28b7.js"]));u(()=>c(()=>import("./Peoples.1ed90e59.js"),["assets/Peoples.1ed90e59.js","assets/vendor.16ba28b7.js"]));u(()=>c(()=>import("./LoginHomePage.9aab03b9.js"),["assets/LoginHomePage.9aab03b9.js","assets/vendor.16ba28b7.js","assets/Login.2ae4c31b.js"]));const Ce=u(()=>c(()=>import("./PostDetails.93da8e32.js"),["assets/PostDetails.93da8e32.js","assets/PostDetails.a4e52403.css","assets/vendor.16ba28b7.js","assets/index.6ad6dc4a.js"])),Oe=u(()=>c(()=>import("./AddPost.45a14c2f.js"),["assets/AddPost.45a14c2f.js","assets/AddPost.f98a40bf.css","assets/vendor.16ba28b7.js","assets/index.6ad6dc4a.js"])),be=u(()=>c(()=>import("./Dashboard.89fe55f2.js"),["assets/Dashboard.89fe55f2.js","assets/vendor.16ba28b7.js","assets/AddPost.45a14c2f.js","assets/AddPost.f98a40bf.css","assets/index.6ad6dc4a.js"])),Ae=u(()=>c(()=>import("./ProfilePage.f2f5fce6.js"),["assets/ProfilePage.f2f5fce6.js","assets/ProfilePage.e50e34e0.css","assets/vendor.16ba28b7.js","assets/index.1b296300.js"])),V=[{path:"/",exact:!0,component:Te},{path:"/author/profile/:username",exact:!0,component:Ae},{path:"/posts/:slug",exact:!0,component:Ce}];var $=a=>a?[...V,{path:"/admin/dashboard",component:be},{path:"/admin/add-post",component:Oe}]:[...V,{path:"/auth/login",exact:!0,component:Re},{path:"/auth/registration",exact:!0,component:ke}];const De=(a,t)=>{const e=t.find(o=>ee(a,{path:o.path,exact:o.exact}));return e?e.component:null};let h=[];const Ie=p=>{var E=p,{staticContext:a,to:t,delay:e,history:o,isActive:r,match:n}=E,l=P(E,["staticContext","to","delay","history","isActive","match"]);let y,g;const[i,d]=s.useState(!1),[j,v]=s.useState(!1);function F(S){console.info(`*********** ${S} *************`)}function R(){F("component.preload function not return any promise, we assume you are not using react lazy loading routing, so you can simple use NavLink or Link"),h=[],d(!0),y=setTimeout(()=>{v(!1)},e||100),e?g=setTimeout(()=>{o.push(t)},e):o.push(t)}function M(S){clearTimeout(y),clearTimeout(g),v(!0),d(!1),h.push(S);const L=De(S,$(!0));if(L&&L.preload){const k=L.preload();k?k.then(()=>{e?setTimeout(()=>{d(!0),v(!1),h=[]},e):(d(!0),v(!1),h=[])}).catch(U=>console.log("Something were wrong when preload component load",U)):R()}else R()}i&&(o.push(h[h.length-1]),h=[],d(!1));function B(){return i?t:""}return s.createElement("div",{className:"preload_route_link"},j&&s.createElement(w,null),s.createElement(Y,m({className:r?"active":"",to:B,onMouseDown:()=>M(t)},l)))};var He=X(e=>{var o=e,{location:a}=o,t=P(o,["location"]);const r=(a==null?void 0:a.pathname)===t.to;return s.createElement(Ie,m({isActive:r},t))});function Ve(a,t){let e=t.trim().toLowerCase();if(e){let o=[];a.map(n=>{n.tags.findIndex(l=>l.toLowerCase().indexOf(e)!==-1)!==-1&&o.push(n),n.title.toLowerCase().indexOf(e)!==-1&&o.push(n)});let r=[];for(let n=0;n<o.length;n++)r.findIndex(p=>p.id===o[n].id)===-1&&r.push(o[n]);return r}else return a}function Ke(a,t){_.get("/api/posts").then(e=>{e.status===200&&(a({type:"FETCH_POSTS",payload:e.data.posts}),t())})}function qe(a,t,e){_.get(`/api/posts/${a}`).then(o=>{o.status===200&&(t({type:"FETCH_POST",payload:o.data.post}),e(o.data.post))})}function Ge(a,t,e){_.get(`/api/raw-md-content/${a}`).then(o=>{o.status===200&&(t({type:"FETCH_RAW_MD_CONTENT",payload:o.data.mdContent}),e(o.data.mdContent))})}const ze=(a,t)=>async e=>{(await _.delete(`/api/post/${a}`)).status===200&&(e({type:"DELETE_POST",payload:a}),t&&t(!0))},$e=a=>{const{authState:t,postState:e}=a,o=te(),r=A(),[n,l]=T.exports.useState("");function p(i){o.push(i),l("")}function E(){l(""),window.localStorage.setItem("token",""),r({type:"LOGIN",payload:{}})}function y(i){return i&&s.createElement("div",{className:"dropdown_nav"},s.createElement("div",{className:"min-w-200px card bg-white text-sm font-medium"},t.id?s.createElement(s.Fragment,null,t.role==="admin"&&s.createElement("li",{className:"hover:bg-primary hover:bg-opacity-40 hover:text-white cursor-pointer px-2 py-1"},s.createElement(f,{icon:re,className:"mr-2 text-gray-800"}),s.createElement(D,{to:"/admin/dashboard"},"Dashboard")),s.createElement("li",{onClick:()=>p(`/author/profile/${t.username}`),className:"hover:bg-opacity-40 hover:bg-primary hover:text-white cursor-pointer px-2 py-1"},s.createElement(f,{icon:ne,className:"mr-2 text-gray-800"}),"Profile"),s.createElement("li",{onClick:()=>E(),className:"hover:bg-primary hover:bg-opacity-40 hover:text-white cursor-pointer px-2 py-1"},s.createElement(f,{icon:le,className:"mr-2 text-gray-800"}),"Logout")):s.createElement("li",{className:"hover:bg-primary hover:bg-opacity-40 hover:text-white  cursor-pointer  px-2 py-1",onClick:()=>p("/auth/login")},s.createElement(f,{className:"mr-2 text-gray-800",icon:ie}),"Login")))}function g(){let i=e.searchValue.trim().toLowerCase();if(i){let d=Ve(e.posts,i);d.length>0?(r({type:"SEARCH_POSTS",payload:d}),o.replace(`/?search=${i}`)):(r({type:"SEARCH_POSTS",payload:[]}),o.replace(`/?search=${i}`))}else r({type:"SEARCH_POSTS",payload:e.posts}),o.replace("/")}return s.createElement(s.Fragment,null,s.createElement("div",{className:"navigation"},s.createElement("div",{className:"navigation__container px-2 md:px-5 "},s.createElement("ul",{className:"main-nav"},s.createElement("div",{className:"nav-logo flex-2"},s.createElement("div",{className:"flex flex align-center"},s.createElement("div",{className:"brand"},s.createElement("h4",null,s.createElement(D,{to:"/"},"My Blog"))),s.createElement("div",{className:"nav-search-input_wrapper flex-2"},s.createElement("input",{onKeyPress:i=>i.key==="Enter"&&g(),value:e.searchValue,onChange:i=>r({type:"SET_POST_SEARCH_VALUE",payload:i.target.value}),className:"nav-search-input",type:"text",placeholder:"Search Blog Posts"}),s.createElement(f,{icon:ae,className:"pointer ",onClick:g})))),s.createElement("div",{className:"nav-center flex-5 md:flex-1"},s.createElement("ul",{className:"nav_items flex  justify-end align-center"},s.createElement("li",{className:"nav_item hidden md:block  "},s.createElement(He,{to:"/"},s.createElement(f,{icon:se,className:"text-white"}))))),s.createElement("div",{className:"nav-auth lg:flex-2"},s.createElement("ul",{className:"nav_items flex justify-end"},s.createElement("div",{className:"py-2 px-0 flex relative items-center",onMouseLeave:()=>l(""),onMouseEnter:()=>l("user_menu")},t.id&&s.createElement("h4",{className:"hidden lg:block text-white font-medium mr-0"},t.first_name),s.createElement("span",{className:"avatar_logo"},t.id?s.createElement("img",{className:"",src:Le(t.avatar?t.avatar:"static/avatar/Alec-Thompson-card_20200415_1603252.10e65779.jpg"),alt:""}):s.createElement(f,{icon:oe,className:"text-white"})),y(n==="user_menu"))))))),s.createElement("div",{className:"h-60"}))};const je=a=>{_.get("/api/auth/current-auth").then(t=>{t.status===201&&a({type:"LOGIN",payload:t.data})})},We=(a,t,e)=>{_.post("/api/auth/login",{email:a.email,password:a.password}).then(o=>{o.status===200&&t({type:"LOGIN",payload:o.data}),e()})};const Fe=()=>{let a="2021-11-08T15:40:15.000Z";return s.createElement("div",{className:"footer"},s.createElement("div",null,s.createElement("ul",null,s.createElement("li",null),s.createElement("li",null),s.createElement("li",null),s.createElement("li",null))),s.createElement("h4",{className:"title text-md text-white"},"Project Start ON ",new Date(a).toLocaleString()))};function Me(a){let t=A(),{authState:e,postState:o}=ce(r=>({authState:r.authState,postState:r.postState}));return s.useEffect(()=>{je(t)},[]),s.createElement("div",{className:"App"},s.createElement($e,{postState:o,authState:e}),s.createElement(ue,null,s.createElement(T.exports.Suspense,{fallback:s.createElement(w,null)},$(!!e.id).map((r,n)=>s.createElement(de,m({key:n},r))))),s.createElement(Fe,null))}me.render(s.createElement(pe,{basename:"/my-blog"},s.createElement(fe,{store:Pe},s.createElement(Me,null))),document.getElementById("app"));export{Ke as a,Ve as b,_ as c,ze as d,qe as e,Le as f,Ge as g,We as l};
