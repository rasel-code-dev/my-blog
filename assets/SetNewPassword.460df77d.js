var x=Object.defineProperty,N=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var u=(a,s,t)=>s in a?x(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,w=(a,s)=>{for(var t in s||(s={}))k.call(s,t)&&u(a,t,s[t]);if(p)for(var t of p(s))v.call(s,t)&&u(a,t,s[t]);return a},f=(a,s)=>N(a,P(s));import{k as S,u as y,R as e,L as D}from"./vendor.0fd0999c.js";import{g}from"./index.340d9940.js";let c;const F=a=>{const s=S(),t=y(),[m,n]=e.useState({status:"",message:""}),[r,h]=e.useState({password:"",rePassword:""}),[E,d]=e.useState(!1);e.useEffect(()=>{s.token&&g().post("/api/auth/password-reset-session-check",{token:s.token}).then(o=>{o.status===200&&d(!0)}).catch(o=>{d(!1)})},[s.token]);function b(o){if(o.preventDefault(),n({status:0,message:""}),r.password&&r.rePassword){if(r.password!==r.rePassword){n({status:400,message:"Password doesn't match"});return}s.token||n({status:400,message:"Please Re send Mail. Because this session are corrupted"}),g().post("/api/auth/reset-password",{token:s.token,password:r.password}).then(l=>{l.status===201&&(c&&clearTimeout(c),n({status:200,message:"Your password change success"}),c=setTimeout(()=>{t({type:"LOGIN",payload:l.data})},300))}).catch(l=>{n({status:400,message:l.response.data.message})})}else n({status:400,message:"Please fill up both field"})}function i(o){h(f(w({},r),{[o.target.name]:o.target.value}))}return e.createElement("div",{className:"mt-4"},E?e.createElement("div",null,e.createElement("h2",{className:"font-bold mb-1"},"Set New Password"),m.message&&e.createElement("div",{className:["p-3 bg-opacity-50",m.status<="200"?"bg-primary":"bg-red-400 "].join(" ")},e.createElement("p",null,m.message)),e.createElement("form",{onSubmit:b,className:"py-5"},e.createElement("div",{className:" flex mb-2 flex-col"},e.createElement("label",{className:"font-medium min-w-100px block text-sm font-400 text-gray-dark-4 required",htmlFor:""},"New Password"),e.createElement("input",{onChange:i,value:r.password,placeholder:"Enter new password.",className:"input-elem",type:"text",name:"password"})),e.createElement("div",{className:" flex mb-2 flex-col"},e.createElement("label",{className:"font-medium min-w-100px block text-sm font-400 text-gray-dark-4 required",htmlFor:""},"Re New Password"),e.createElement("input",{onChange:i,value:r.rePassword,placeholder:"Enter new password.",className:"input-elem",type:"text",name:"rePassword"})),e.createElement("div",null,e.createElement("button",{className:"btn"},"Change Password")))):e.createElement("div",null,e.createElement("h2",{className:"font-bold mb-4"},"Session Expires"),e.createElement("p",null,"Your Password reset session end. please retry password reset request to click forget password button."),e.createElement("span",{className:"cursor-pointer text-blue-400 p-px"},e.createElement(D,{to:"/auth/login/reset-password"},"Forget password ?"))))};export{F as default};
