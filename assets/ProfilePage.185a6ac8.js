var O=Object.defineProperty,z=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var k=(l,a,s)=>a in l?O(l,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[a]=s,C=(l,a)=>{for(var s in a||(a={}))H.call(a,s)&&k(l,s,a[s]);if(P)for(var s of P(a))K.call(a,s)&&k(l,s,a[s]);return l},S=(l,a)=>z(l,D(a));import{R as L,_ as A,c as h,f as x,P as U,d as B,e as V}from"./index.340d9940.js";import{R as e,k as Q,u as W,j as q,F as m,p as J,Q as T,B as X,D as Y,G as Z,H as ee,L as $,T as te,r as N}from"./vendor.0fd0999c.js";import{S as n}from"./Skeleton.9dff840e.js";const ae=()=>e.createElement(n,{className:""},e.createElement("div",{className:"flex items-start"},e.createElement(n.Circle,{height:"70px",width:"150px",radius:4}),e.createElement("div",{className:"flex-1 ml-1"},e.createElement("div",{className:"flex items-center"},e.createElement(n.Circle,{height:"24px",width:"24px"}),e.createElement(n.Line,{height:20,className:"my-1 ml-1"})),e.createElement(n.Line,{width:"100%",height:10,className:"my-1"}),e.createElement(n.Line,{width:"90%",height:10,className:"my-1"}),e.createElement(n.Line,{width:"40%",height:10,className:"my-1"}))));const le=()=>e.createElement("div",{className:"mt-2 mx-4"},e.createElement(n,{delay:"0.5s"},e.createElement("div",{className:"relative"},e.createElement(n.Circle,{height:"300px",width:"100%",radius:"0",className:"",bg:"#cdcdcd"}),e.createElement("div",{className:"absolute  w-1/2 top-2 z-10 left-1/2 transform -translate-x-1/2"},e.createElement("div",{className:"flex flex-col items-center"},e.createElement(n.Circle,{height:"90px",width:"90px",className:"mt-8"}),e.createElement(n.Line,{width:"90%",height:20,className:"my-0.5 mt-4"}),e.createElement("div",{className:"flex"},e.createElement(n.Circle,{height:"20px",width:"20px",className:"mt-8 mx-1"}),e.createElement(n.Circle,{height:"20px",width:"20px",className:"mt-8 mx-1"}),e.createElement(n.Circle,{height:"20px",width:"20px",className:"mt-8 mx-1"}),e.createElement(n.Circle,{height:"20px",width:"20px",className:"mt-8 mx-1"}),e.createElement(n.Circle,{height:"20px",width:"20px",className:"mt-8 mx-1"})))))),e.createElement(n,{delay:"0.4s"},e.createElement("div",{className:"flex justify-center"},e.createElement(n.Line,{width:"50%",height:30,className:"my-0.5 mt-4"})),e.createElement(n.Line,{width:"150px",height:30,radius:"100px",className:"my-0.5 mt-4 mb-4"})),new Array(5).fill(1).map((l,a)=>e.createElement("li",{className:"my-4"},e.createElement(ae,null))));function re(l=""){let a=l.match("http");if(!a)return l;let s=l.substring(a.index,l.length);if(!s)return l;let o,u=s.indexOf(" ");u===-1?o=s.length:o=u;let r=l.substring(a.index,a.index+o);return l.replace(r,`<a href=${r} target="blank">${r}</a>`)}const se=L(()=>A(()=>import("./ProfileEditor.8dc2b0a2.js"),["assets/ProfileEditor.8dc2b0a2.js","assets/ProfileEditor.2026b13d.css","assets/index.340d9940.js","assets/index.3ec28c87.css","assets/vendor.0fd0999c.js"])),j=L(()=>A(()=>import("./ProfilePhotoChooserModal.08a1990f.js"),["assets/ProfilePhotoChooserModal.08a1990f.js","assets/vendor.0fd0999c.js","assets/index.340d9940.js","assets/index.3ec28c87.css"])),oe=()=>{const l=Q(),a=W(),s=q(t=>t.authState),o=e.useRef(),u=e.useRef();let[r,p]=e.useState({}),[d,b]=e.useState([]);const[i,_]=e.useState({cover:{base:"",blob:""},avatar:{base:"",blob:""}}),[f,E]=e.useState("");e.useEffect(async()=>{let t=await h.get(`/api/users/${l.id}`);t.status===200&&(p(t.data.user),t=await h.get(`/api/posts?author_id=${t.data.user._id}`),t.status===200&&b(t.data))},[l.id]);function G(t,c){a(B(t,c)),b(d.filter(g=>g._id!==t))}function I(t,c){let g=new FormData;g.append(t,c,c.name?c.name:""),h.post(`${t==="avatar"?"api/upload-profile-photo":"api/upload-profile-cover-photo"}`,g).then(y=>{console.log(y)}).catch(y=>{})}function w(t){V(t.target.files[0],c=>{c&&(_(S(C({},i),{[t.target.name]:{base:c}})),I(t.target.name,t.target.files[0]))})}function v(t,c){E(c?t:""),a({type:"TOGGLE_APPMASK",payload:{as:"backdrop",isOpen:!!c}})}async function R(t){a({type:"TOGGLE_APPMASK",payload:!1}),E("");let c=await h.get(`/api/users/${l.id}`);c.status===200&&p(c.data.user)}async function F(t){a({type:"TOGGLE_APPMASK",payload:!1}),E("");let c=await h.get(`/api/users/${l.id}`);c.status===200&&p(c.data.user)}function M(){return r.cover?i.cover.base?i.cover.base:x(r.cover):i.cover.base?i.cover.base:""}return e.useEffect(()=>()=>{_({cover:{base:"",blob:""},avatar:{base:"",blob:""}})},[]),r._id?e.createElement("div",null,e.createElement("div",{className:"profile_hero_header background_cover",style:{backgroundImage:`url(${M()})`}},e.createElement("div",{className:"relative overlay"},e.createElement("input",{accept:"image/*",onChange:w,name:"avatar",ref:o,type:"file",hidden:!0}),e.createElement("input",{accept:"image/*",onChange:w,name:"cover",ref:u,type:"file",hidden:!0}),s._id===r._id&&e.createElement("button",{onClick:()=>v("cover",!0),className:"absolute right-2 top-2 btn bg-opacity-40 btn-outline text-white text-sm "},"Change Cover"),e.createElement("div",{className:"container-1000 mt-0 mx-auto text-center overlay-title "},e.createElement("div",{className:"relative"},e.createElement("div",{className:"post_cover text-center m-auto relative",style:{width:"100px"}},r.avatar?i.avatar.base?e.createElement("img",{className:"w-full rounded-full",src:i.avatar.base,alt:""}):e.createElement("img",{className:"w-full rounded-full",src:x(r.avatar),alt:""}):i.avatar.base?e.createElement("img",{className:"w-full rounded-full",src:i.avatar.base,alt:""}):e.createElement(m,{className:"text-9xl",icon:J}),s._id===r._id&&e.createElement(m,{onClick:()=>v("avatar",!0),className:"absolute bottom-6 z-10 transform translate-x-1/2 right-1/2",icon:T}))),e.createElement("div",null,e.createElement("h1",null,r.first_name," ",r.last_name),e.createElement("p",{className:"leading-6 text-opacity-90 text-white",dangerouslySetInnerHTML:{__html:r.description&&re(r.description)}}),e.createElement("div",{className:"social flex justify-center"},e.createElement("li",{className:"mr-2"},e.createElement("a",{href:"https://www.facebook.com/raselmraju",target:"_blank"},e.createElement(m,{icon:X}))),e.createElement("li",{className:"mr-2"},e.createElement("a",{href:"https://github.com/rasel-code-dev",target:"_blank"},e.createElement(m,{icon:Y}))),e.createElement("li",{className:"mr-4"},e.createElement("a",{href:"https://www.linkedin.com/in/rasel-code-dev",target:"_blank"},e.createElement(m,{icon:Z}))),e.createElement("li",{className:"mr-2"},e.createElement("a",{href:"https://rasel-code-dev.vercel.app",target:"_blank"},e.createElement(m,{icon:ee})))))))),e.createElement("div",{className:"container"},e.createElement("h4",{className:"title text-lg text-center mt-4 dark_subtitle"},d&&d.length," Stories by ",r.first_name," ",r.last_name),e.createElement("div",{className:"user-content-wrapper"},s._id===r._id&&e.createElement("div",{className:"my-4"},e.createElement($,{className:"btn btn-outline dark_subtitle ",to:"/admin/dashboard/add-post/null"},"Make A Post")),e.createElement("div",{className:"user-posts mt-4"},d&&d.map(t=>e.createElement("div",{key:t._id,className:"p-2 my-1"},e.createElement("div",{className:"flex own-post "},e.createElement("div",{className:"mr-2 post_cover",style:{width:"100px"}},e.createElement("img",{className:"w-full",src:x(t.cover),alt:""})),e.createElement("div",{className:"flex w-full justify-between  flex-12"},e.createElement(U,{to:`/posts/${t.slug}/${t._id}`},e.createElement("h4",{className:"hover:text-primary dark_subtitle"},t.title)),(r&&r._id)===(s&&s._id)&&e.createElement("div",{className:"ml-4"},e.createElement("span",{className:"action flex"},e.createElement($,{to:`/admin/dashboard/add-post/${t._id}`},e.createElement(m,{icon:T,className:"pointer fa fa-trash ml-3 text-sm dark_gray "})),e.createElement(m,{icon:te,onClick:c=>G(t._id,t.path),className:"pointer fa fa-trash ml-3 text-sm dark_gray "})))))))),f&&f==="cover"&&e.createElement("div",{className:"fixed profile-edit-form z-500 top-1/5 shadow_1 rounded-5"},e.createElement("div",{className:"bg-white px-6 py-4 rounded-5 w-full mx-auto"},e.createElement(N.exports.Suspense,{fallback:e.createElement("div",null)},e.createElement(j,{onSuccess:R,whichPhoto:"cover",onCancel:()=>v("cover",!1)})))),f&&f==="avatar"&&e.createElement("div",{className:"fixed profile-edit-form z-500  shadow_1 rounded-5"},e.createElement("div",{className:"bg-white px-10 py-5 rounded-5 w-full mx-auto dark:bg-dark-500"},e.createElement(N.exports.Suspense,{fallback:e.createElement("div",null)},e.createElement(j,{whichPhoto:"avatar",onSuccess:F,onCancel:()=>v("avatar",!1)})))),s&&r&&r._id===s._id&&e.createElement(N.exports.Suspense,{fallback:e.createElement("div",null)},e.createElement(se,{dispatch:a,author:r}))))):e.createElement("div",{className:"container-1000"},e.createElement(le,null))};export{oe as default};
