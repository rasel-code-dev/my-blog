var S=Object.defineProperty,x=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var P=(n,t,s)=>t in n?S(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s,w=(n,t)=>{for(var s in t||(t={}))v.call(t,s)&&P(n,s,t[s]);if(h)for(var s of h(t))k.call(t,s)&&P(n,s,t[s]);return n},c=(n,t)=>x(n,N(t));import{R as a,F,h as A}from"./vendor.0fd0999c.js";import{g as R}from"./index.340d9940.js";import{A as U}from"./AlertHandler.f5d7586f.js";function M(n){const{handleProfileEditForm:t,author:s}=n,[d,m]=a.useState({isShown:!1,message:""}),[e,u]=a.useState({username:"",email:"",about_you:"",first_name:"",last_name:"",oldPassword:"",newPassword:"",newConfirmPassword:""});a.useEffect(()=>{u({username:s.username,email:s.email,first_name:s.first_name,last_name:s.last_name,about_you:s.about_you})},[s]);function _(){m(c(w({},d),{isShown:!1}))}function f(l){u(c(w({},e),{[l.target.name]:l.target.value}))}function b(l){l.preventDefault(),m({message:"",isShown:!1});let i={username:e.username?e.username.trim():"",email:e.email?e.email.trim():"",first_name:e.first_name?e.first_name.trim():"",last_name:e.last_name?e.last_name.trim():"",about_you:e.about_you?e.about_you.trim():""};if(e.oldPassword&&e.newConfirmPassword&&e.newConfirmPassword)if(e.newPassword!==e.newConfirmPassword){m({message:"Please Check your password",isShown:!0});return}else i.newPassword=e.newPassword.trim(),i.oldPassword=e.oldPassword.trim();R().post("/api/update-profile",i).then(o=>{o.status===201?(m({isShown:!0,message:o.data.message}),setTimeout(()=>{t(!1),u({username:"",email:"",first_name:"",last_name:"",oldPassword:"",newPassword:"",newConfirmPassword:"",about_you:""})},200)):m({isShown:!0,message:o.data.message})}).catch(o=>{m({isShown:!0,message:o.response&&o.response.data.message?o.response.data.message:o.message})})}function r(l,i,o,g="text",E){let[p,y]=a.useState(!1);function C(){y(!p)}return a.createElement("div",{className:"flex mb-2 flex-col md:flex-row"},a.createElement("label",{className:"font-medium min-w-150 block text-sm font-400 text-gray-dark-4;",htmlFor:""},l),a.createElement("div",{className:"input-elem flex items-center"},a.createElement("input",{onChange:f,value:o,placeholder:E,className:"outline-none w-full",type:p?"text":g,name:i}),g==="password"&&a.createElement(F,{onClick:C,icon:A,className:"cursor-pointer text-gray-500"})))}return a.createElement("div",{className:"fixed profile-edit-form z-500 top-1/3 shadow_1 rounded-5"},a.createElement("div",{className:"bg-white px-6 py-4 rounded-5 w-full mx-auto"},a.createElement(U,{message:d.message,isShown:d.isShown,onClick:_,status:200}),a.createElement("h1",{className:"text-lg font-400 text-gray-light-7 text-center mb-5"},"Edit Profile Information"),a.createElement("form",{onSubmit:b,className:"py-1 w-full"},a.createElement("div",{className:"grid w-full grid-cols-1 md:grid-cols-2  md:gap-x-4 lg:gap-x-16 "},r("First name","first_name",e.first_name,"","Change first name"),r("Last name","last_name",e.last_name,"","Change last name"),r("Username","username",e.username,"username","Change Username"),r("Email","email",e.email,"email","Change Email"),r("Current password","oldPassword",e.oldPassword,"password","Enter your current password."),r("New Password","newPassword",e.newPassword,"password","Set your new password."),r("Re-type new password","newConfirmPassword",e.newConfirmPassword,"password","Re-type new password")),a.createElement("div",{className:"block"},a.createElement("label",{className:"font-medium min-w-150 block text-sm font-400 text-gray-dark-4;",htmlFor:""},"About You"),a.createElement("div",{className:"input-elem "},a.createElement("textarea",{name:"about_you",onChange:f,defaultValue:e.about_you,placeholder:"About Your",className:"outline-none w-full"}))),a.createElement("div",{className:"mt-6"},a.createElement("button",{type:"submit",className:"btn"},"Update"),a.createElement("button",{onClick:()=>t(!1),type:"button",className:"btn ml-3"},"Cancel")))))}export{M as default};
